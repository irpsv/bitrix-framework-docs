---
title: Консольные команды
---

Консольные команды в Bitrix Framework -- это инструмент для выполнения операционных задач, генерации кода и автоматизации процессов разработки через терминал. Реализованы на базе Symfony Console.

## Что такое консольные команды

Консольная команда -- это PHP-скрипт, который выполняется из терминала и может:

-  принимать аргументы и опции от пользователя,
-  выполнять длительные операции без ограничений времени веб-запроса,
-  автоматизировать задачи разработки и администрирования,
-  запускаться по расписанию через cron.

Команды особенно полезны для:

-  управления кешем и индексами,
-  генерации кода (компоненты, контроллеры, ORM-классы),
-  миграции и обслуживания базы данных,
-  интеграции с внешними системами.

## Как работать с командами

Все консольные команды в Bitrix Framework запускаются через файл `bitrix.php`, который находится в директории `bitrix` вашего проекта.

```bash
cd /path/to/document_root/bitrix
php bitrix.php [команда] [аргументы] [опции]
```

{% note info "" %}

Для работы с консольными командами необходимо настроить Composer. Подробнее читайте в статье [Composer](../get-started/composer).

{% endnote %}

### Просмотр доступных команд

Чтобы увидеть список всех зарегистрированных команд, выполните:

```bash
php bitrix.php list
```

Команда выведет список встроенных команд Bitrix и команд из установленных модулей.

### Справка по команде

Для получения подробной информации о конкретной команде используйте:

```bash
php bitrix.php help [имя-команды]
# или альтернативный вариант
php bitrix.php [имя-команды] --help
```

Справка покажет описание команды, список доступных аргументов и опций с их описанием.

## Встроенные команды

Bitrix Framework уже включает набор команд для разработки, например:

-  `orm:annotate` -- сканирует проект на наличие ORM-сущностей и генерирует аннотации для улучшения автодополнения в IDE.
-  `make:component` -- создает компонент с базовой структурой.
-  `make:controller` -- генерирует REST-контроллер для API.
-  `make:tablet` -- создает ORM-класс (DataManager) для таблицы базы данных.

{% note tip "" %}

Это неполный список команд. Чтобы увидеть все доступные команды, используйте `php bitrix.php list`.

{% endnote %}

## Создание собственной команды

Консольная команда в Bitrix Framework -- это PHP-класс, который наследуется от `Symfony\Component\Console\Command\Command`.

Подробную информацию о создании команд, их структуре и возможностях смотрите в [официальной документации Symfony](https://symfony.com/doc/current/console.html#creating-a-command).

## Регистрация команды

Создания класса команды недостаточно. Команду необходимо зарегистрировать в файле `.settings.php` в корне вашего модуля.

{% note warning "" %}

Без регистрации в `.settings.php` команда не появится в списке доступных команд при выполнении `php bitrix.php list`.

{% endnote %}

### Файл .settings.php

Создайте или дополните файл `.settings.php` в корне вашего модуля:

```php
<?php

return [
    'console' => [
        'value' => [
            'commands' => [
                // Регистрация команды
                \Partner\Module\Cli\Command\Feature\RebuildCommand::class,
            ],
        ],
        'readonly' => true,
    ],
];
```

После регистрации команда станет доступна через `php bitrix.php list`.

## Размещение файлов

Рекомендуемая структура модуля с командами:

```
/local/modules/partner.module/
├── .settings.php          # Регистрация команд
├── install/
│   └── index.php
└── lib/
    └── Cli/
        └── Command/
            └── Feature/
                └── RebuildCommand.php
```

{% note tip "" %}

Имя команды формируется на основе пространства имён. Для примера выше имя команды будет `feature:rebuild`.

{% endnote %}

## Использование в автоматизации

Команды можно запускать по расписанию через cron. Это полезно для регулярного обслуживания системы.

### Пример настройки cron

```bash
# Выполнение команды каждый день в 3:00
0 3 * * * php /path/to/document_root/bitrix/bitrix.php [command] --no-interaction

# Выполнение команды каждую неделю
0 4 * * 0 php /path/to/document_root/bitrix/bitrix.php [command] --no-interaction
```

{% note info "" %}

При использовании команд в cron всегда указывайте опцию `--no-interaction`, чтобы пропустить интерактивные запросы подтверждения.

{% endnote %}

